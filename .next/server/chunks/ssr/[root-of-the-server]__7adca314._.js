module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},9307,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(73885);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)({name:"",description:"",espIpAddress:"",gpioPin:"2",hourlyRate:"130000"}),[n,o]=(0,c.useState)(!1),p=async()=>{try{let a=await fetch("/api/tables");if(a.ok){let b=await a.json();e(b)}}catch(a){console.error("Error fetching tables:",a)}finally{g(!1)}};(0,c.useEffect)(()=>{p()},[]);let q=a=>{a?(k(a),m({name:a.name,description:a.description||"",espIpAddress:a.espIpAddress,gpioPin:a.gpioPin.toString(),hourlyRate:a.hourlyRate.toString()})):(k(null),m({name:"",description:"",espIpAddress:"",gpioPin:"2",hourlyRate:"130000"})),i(!0)},r=()=>{i(!1),k(null),m({name:"",description:"",espIpAddress:"",gpioPin:"2",hourlyRate:"130000"})},s=async a=>{a.preventDefault(),o(!0);try{let a=j?`/api/tables/${j.id}`:"/api/tables",b=j?"PUT":"POST",c=await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,description:l.description||null,espIpAddress:l.espIpAddress,gpioPin:parseInt(l.gpioPin),hourlyRate:parseInt(l.hourlyRate)})});if(c.ok)r(),p();else{let a=await c.json();alert(a.error||"Ошибка сохранения")}}catch(a){console.error("Error saving table:",a)}finally{o(!1)}},t=async a=>{if(confirm(`Удалить стол "${a.name}"?`))try{(await fetch(`/api/tables/${a.id}`,{method:"DELETE"})).ok&&p()}catch(a){console.error("Error deleting table:",a)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Настройка столов"}),(0,b.jsx)("button",{onClick:()=>q(),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition",children:"+ Добавить стол"})]}),f?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("svg",{className:"animate-spin h-10 w-10 text-green-500",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl overflow-hidden overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Название"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Цена/час"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"ESP IP"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Статус"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400",children:"Действия"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-gray-300",children:a.id}),(0,b.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 text-yellow-400 font-medium",children:a.hourlyRate.toLocaleString("ru-RU")+" сум"}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-300 font-mono text-sm",children:a.espIpAddress}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.isActive?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:a.isActive?"Активен":"Неактивен"})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right whitespace-nowrap",children:[(0,b.jsx)("button",{onClick:()=>q(a),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg mr-2 transition",children:"Изменить"}),(0,b.jsx)("button",{onClick:()=>t(a),className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition",children:"Удалить"})]})]},a.id))})]}),0===a.length&&(0,b.jsx)("div",{className:"text-center py-12 text-gray-400",children:'Столы не найдены. Нажмите "Добавить стол" чтобы создать первый.'})]})]}),h&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),(0,b.jsxs)("div",{className:"relative bg-gray-800 rounded-2xl p-6 w-full max-w-md mx-4 shadow-2xl",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:j?"Редактировать стол":"Добавить стол"}),(0,b.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Название"}),(0,b.jsx)("input",{type:"text",value:l.name,onChange:a=>m({...l,name:a.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Стол 1",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Описание (опционально)"}),(0,b.jsx)("input",{type:"text",value:l.description,onChange:a=>m({...l,description:a.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Бильярдный стол №1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Цена за час (сум)"}),(0,b.jsx)("input",{type:"number",value:l.hourlyRate,onChange:a=>m({...l,hourlyRate:a.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"130000",min:"0",step:"1000",required:!0}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Например: 130000 = 130,000 сум/час"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"IP адрес ESP-12F"}),(0,b.jsx)("input",{type:"text",value:l.espIpAddress,onChange:a=>m({...l,espIpAddress:a.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 font-mono",placeholder:"192.168.1.100",pattern:"^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}$",required:!0}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Локальный IP адрес ESP-12F для управления люстрой"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"GPIO пин"}),(0,b.jsx)("input",{type:"number",value:l.gpioPin,onChange:a=>m({...l,gpioPin:a.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"2",min:"0",max:"16"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"GPIO пин для реле (по умолчанию 2)"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:r,className:"flex-1 py-3 px-4 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition",children:"Отмена"}),(0,b.jsx)("button",{type:"submit",disabled:n,className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white font-medium rounded-lg transition flex items-center justify-center",children:n?(0,b.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Сохранить"})]})]})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7adca314._.js.map