{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/lib/api.ts"],"sourcesContent":["/**\n * API клиент для Django backend\n */\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api/v1\";\n\n// Токены хранятся в localStorage\nconst getAccessToken = () => {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"access_token\");\n};\n\nconst getRefreshToken = () => {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"refresh_token\");\n};\n\nconst getTenantId = () => {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"tenant_id\");\n};\n\n// Сохранение токенов\nexport const setTokens = (access: string, refresh: string) => {\n  localStorage.setItem(\"access_token\", access);\n  localStorage.setItem(\"refresh_token\", refresh);\n};\n\nexport const setTenantId = (tenantId: string) => {\n  localStorage.setItem(\"tenant_id\", tenantId);\n};\n\nexport const clearAuth = () => {\n  localStorage.removeItem(\"access_token\");\n  localStorage.removeItem(\"refresh_token\");\n  localStorage.removeItem(\"tenant_id\");\n};\n\n// Базовый fetch с авторизацией\nasync function fetchWithAuth(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<Response> {\n  const token = getAccessToken();\n  const tenantId = getTenantId();\n\n  const headers: HeadersInit = {\n    \"Content-Type\": \"application/json\",\n    ...(options.headers || {}),\n  };\n\n  if (token) {\n    (headers as Record<string, string>)[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  if (tenantId) {\n    (headers as Record<string, string>)[\"X-Tenant-ID\"] = tenantId;\n  }\n\n  const response = await fetch(`${API_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  // Если 401 - пробуем обновить токен\n  if (response.status === 401) {\n    const refreshToken = getRefreshToken();\n    if (refreshToken) {\n      const refreshResponse = await fetch(`${API_URL}/auth/refresh/`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ refresh: refreshToken }),\n      });\n\n      if (refreshResponse.ok) {\n        const data = await refreshResponse.json();\n        setTokens(data.access, data.refresh || refreshToken);\n\n        // Повторяем запрос с новым токеном\n        (headers as Record<string, string>)[\"Authorization\"] = `Bearer ${data.access}`;\n        return fetch(`${API_URL}${endpoint}`, { ...options, headers });\n      }\n    }\n\n    // Если обновить не удалось - выходим\n    clearAuth();\n    window.location.href = \"/login\";\n  }\n\n  return response;\n}\n\n// ==================== AUTH ====================\n\nexport const auth = {\n  async login(username: string, password: string) {\n    const response = await fetch(`${API_URL}/auth/login/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ username, password }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.detail || \"Ошибка авторизации\");\n    }\n\n    const data = await response.json();\n    setTokens(data.access, data.refresh);\n\n    // Автоматически выбираем первое заведение\n    if (data.tenants?.length > 0) {\n      setTenantId(data.tenants[0].id);\n    }\n\n    return data;\n  },\n\n  async me() {\n    const response = await fetchWithAuth(\"/auth/me/\");\n    if (!response.ok) throw new Error(\"Не авторизован\");\n    return response.json();\n  },\n\n  logout() {\n    clearAuth();\n    window.location.href = \"/login\";\n  },\n};\n\n// ==================== TENANTS ====================\n\nexport const tenants = {\n  async list() {\n    const response = await fetchWithAuth(\"/tenants/\");\n    return response.json();\n  },\n\n  async get(id: number) {\n    const response = await fetchWithAuth(`/tenants/${id}/`);\n    return response.json();\n  },\n\n  async getSettings() {\n    const tenantId = getTenantId();\n    const response = await fetchWithAuth(`/tenants/${tenantId}/settings/`);\n    return response.json();\n  },\n\n  async updateSettings(data: Record<string, unknown>) {\n    const tenantId = getTenantId();\n    const response = await fetchWithAuth(`/tenants/${tenantId}/settings/`, {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n};\n\n// ==================== CATEGORIES ====================\n\nexport const categories = {\n  async list() {\n    const response = await fetchWithAuth(\"/categories/\");\n    return response.json();\n  },\n\n  async get(id: number) {\n    const response = await fetchWithAuth(`/categories/${id}/`);\n    return response.json();\n  },\n\n  async create(data: Record<string, unknown>) {\n    const response = await fetchWithAuth(\"/categories/\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async update(id: number, data: Record<string, unknown>) {\n    const response = await fetchWithAuth(`/categories/${id}/`, {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async delete(id: number) {\n    await fetchWithAuth(`/categories/${id}/`, { method: \"DELETE\" });\n  },\n};\n\n// ==================== ASSETS ====================\n\nexport const assets = {\n  async list(params?: { category?: number; active?: boolean }) {\n    const searchParams = new URLSearchParams();\n    if (params?.category) searchParams.set(\"category\", String(params.category));\n    if (params?.active !== undefined) searchParams.set(\"active\", String(params.active));\n\n    const query = searchParams.toString();\n    const response = await fetchWithAuth(`/assets/${query ? `?${query}` : \"\"}`);\n    return response.json();\n  },\n\n  async get(id: number) {\n    const response = await fetchWithAuth(`/assets/${id}/`);\n    return response.json();\n  },\n\n  async create(data: Record<string, unknown>) {\n    const response = await fetchWithAuth(\"/assets/\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async update(id: number, data: Record<string, unknown>) {\n    const response = await fetchWithAuth(`/assets/${id}/`, {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async delete(id: number) {\n    await fetchWithAuth(`/assets/${id}/`, { method: \"DELETE\" });\n  },\n\n  async getSessions(id: number) {\n    const response = await fetchWithAuth(`/assets/${id}/sessions/`);\n    return response.json();\n  },\n};\n\n// ==================== SESSIONS ====================\n\nexport const sessions = {\n  async list(params?: { asset?: number; status?: string; from?: string; to?: string }) {\n    const searchParams = new URLSearchParams();\n    if (params?.asset) searchParams.set(\"asset\", String(params.asset));\n    if (params?.status) searchParams.set(\"status\", params.status);\n    if (params?.from) searchParams.set(\"from\", params.from);\n    if (params?.to) searchParams.set(\"to\", params.to);\n\n    const query = searchParams.toString();\n    const response = await fetchWithAuth(`/sessions/${query ? `?${query}` : \"\"}`);\n    return response.json();\n  },\n\n  async start(assetId: number, plannedDuration?: number, metadata?: Record<string, unknown>) {\n    const response = await fetchWithAuth(\"/sessions/start/\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        asset_id: assetId,\n        planned_duration: plannedDuration,\n        metadata: metadata || {},\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || \"Ошибка запуска сессии\");\n    }\n\n    return response.json();\n  },\n\n  async stop(id: string, promotionCode?: string) {\n    const response = await fetchWithAuth(`/sessions/${id}/stop/`, {\n      method: \"POST\",\n      body: JSON.stringify({ promotion_code: promotionCode }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || \"Ошибка завершения сессии\");\n    }\n\n    return response.json();\n  },\n\n  async cancel(id: string) {\n    const response = await fetchWithAuth(`/sessions/${id}/cancel/`, {\n      method: \"POST\",\n    });\n    return response.json();\n  },\n};\n\n// ==================== PRICING ====================\n\nexport const pricing = {\n  async listRules() {\n    const response = await fetchWithAuth(\"/pricing/rules/\");\n    return response.json();\n  },\n\n  async createRule(data: Record<string, unknown>) {\n    const response = await fetchWithAuth(\"/pricing/rules/\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async updateRule(id: number, data: Record<string, unknown>) {\n    const response = await fetchWithAuth(`/pricing/rules/${id}/`, {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  },\n\n  async deleteRule(id: number) {\n    await fetchWithAuth(`/pricing/rules/${id}/`, { method: \"DELETE\" });\n  },\n};\n\n// ==================== PROMOTIONS ====================\n\nexport const promotions = {\n  async list() {\n    const response = await fetchWithAuth(\"/promotions/\");\n    return response.json();\n  },\n\n  async validate(code: string) {\n    const response = await fetchWithAuth(\"/promotions/validate/\", {\n      method: \"POST\",\n      body: JSON.stringify({ code }),\n    });\n    return response.json();\n  },\n};\n\n// ==================== REPORTS ====================\n\nexport const reports = {\n  async summary(params?: { from?: string; to?: string; groupBy?: string }) {\n    const searchParams = new URLSearchParams();\n    if (params?.from) searchParams.set(\"from\", params.from);\n    if (params?.to) searchParams.set(\"to\", params.to);\n    if (params?.groupBy) searchParams.set(\"groupBy\", params.groupBy);\n\n    const query = searchParams.toString();\n    const response = await fetchWithAuth(`/reports/summary/${query ? `?${query}` : \"\"}`);\n    return response.json();\n  },\n\n  async revenue(params?: { from?: string; to?: string; groupBy?: string }) {\n    const searchParams = new URLSearchParams();\n    if (params?.from) searchParams.set(\"from\", params.from);\n    if (params?.to) searchParams.set(\"to\", params.to);\n    if (params?.groupBy) searchParams.set(\"groupBy\", params.groupBy);\n\n    const query = searchParams.toString();\n    const response = await fetchWithAuth(`/reports/revenue/${query ? `?${query}` : \"\"}`);\n    return response.json();\n  },\n\n  async assets(params?: { from?: string; to?: string }) {\n    const searchParams = new URLSearchParams();\n    if (params?.from) searchParams.set(\"from\", params.from);\n    if (params?.to) searchParams.set(\"to\", params.to);\n\n    const query = searchParams.toString();\n    const response = await fetchWithAuth(`/reports/assets/${query ? `?${query}` : \"\"}`);\n    return response.json();\n  },\n\n  getExportUrl(format: \"xlsx\" | \"pdf\", params?: { from?: string; to?: string }) {\n    const searchParams = new URLSearchParams();\n    searchParams.set(\"format\", format);\n    if (params?.from) searchParams.set(\"from\", params.from);\n    if (params?.to) searchParams.set(\"to\", params.to);\n\n    return `${API_URL}/reports/export/?${searchParams.toString()}`;\n  },\n};\n\n// ==================== IOT ====================\n\nexport const iot = {\n  async listDevices() {\n    const response = await fetchWithAuth(\"/iot/devices/\");\n    return response.json();\n  },\n\n  async sendCommand(deviceId: number, action: \"on\" | \"off\", gpioPin?: number) {\n    const response = await fetchWithAuth(`/iot/devices/${deviceId}/command/`, {\n      method: \"POST\",\n      body: JSON.stringify({ action, gpio_pin: gpioPin || 2 }),\n    });\n    return response.json();\n  },\n\n  async getDeviceStatus(deviceId: number) {\n    const response = await fetchWithAuth(`/iot/devices/${deviceId}/status/`);\n    return response.json();\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { auth } from \"@/lib/api\";\n\nconst navigation = [\n  {\n    name: \"Объекты\",\n    href: \"/dashboard\",\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n      </svg>\n    )\n  },\n  {\n    name: \"Отчёты\",\n    href: \"/reports\",\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n      </svg>\n    )\n  },\n  {\n    name: \"История\",\n    href: \"/history\",\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n    )\n  },\n  {\n    name: \"Настройки\",\n    href: \"/settings\",\n    icon: (\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n      </svg>\n    )\n  },\n];\n\nexport default function Navbar() {\n  const pathname = usePathname();\n\n  const handleLogout = () => {\n    auth.logout();\n  };\n\n  return (\n    <nav className=\"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-gray-700/50 shadow-lg\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center\">\n            {/* Logo */}\n            <Link href=\"/dashboard\" className=\"flex items-center gap-3 group\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/25 group-hover:shadow-green-500/40 transition-shadow\">\n                <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                </svg>\n              </div>\n              <span className=\"text-xl font-bold bg-gradient-to-r from-green-400 to-emerald-500 bg-clip-text text-transparent\">\n                RentFlow\n              </span>\n            </Link>\n\n            {/* Desktop Navigation */}\n            <div className=\"hidden md:block ml-10\">\n              <div className=\"flex items-center gap-1\">\n                {navigation.map((item) => {\n                  const isActive = pathname === item.href;\n                  return (\n                    <Link\n                      key={item.name}\n                      href={item.href}\n                      className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                        isActive\n                          ? \"bg-green-500/20 text-green-400 shadow-inner\"\n                          : \"text-gray-400 hover:text-white hover:bg-gray-700/50\"\n                      }`}\n                    >\n                      {item.icon}\n                      {item.name}\n                    </Link>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          {/* Logout Button */}\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all duration-200\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n            </svg>\n            <span className=\"hidden sm:inline\">Выйти</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Mobile menu */}\n      <div className=\"md:hidden border-t border-gray-700/50\">\n        <div className=\"px-3 py-3 flex justify-around\">\n          {navigation.map((item) => {\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={`flex flex-col items-center gap-1 px-4 py-2 rounded-lg text-xs font-medium transition-all ${\n                  isActive\n                    ? \"text-green-400\"\n                    : \"text-gray-400 hover:text-white\"\n                }`}\n              >\n                {item.icon}\n                {item.name}\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,aAAa;IACjB;QACE,MAAM;QACN,MAAM;QACN,oBACE,6LAAC;YAAI,WAAU;YAAU,MAAK;YAAO,QAAO;YAAe,SAAQ;sBACjE,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBAAQ,aAAa;gBAAG,GAAE;;;;;;;;;;;IAG3E;IACA;QACE,MAAM;QACN,MAAM;QACN,oBACE,6LAAC;YAAI,WAAU;YAAU,MAAK;YAAO,QAAO;YAAe,SAAQ;sBACjE,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBAAQ,aAAa;gBAAG,GAAE;;;;;;;;;;;IAG3E;IACA;QACE,MAAM;QACN,MAAM;QACN,oBACE,6LAAC;YAAI,WAAU;YAAU,MAAK;YAAO,QAAO;YAAe,SAAQ;sBACjE,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBAAQ,aAAa;gBAAG,GAAE;;;;;;;;;;;IAG3E;IACA;QACE,MAAM;QACN,MAAM;QACN,oBACE,6LAAC;YAAI,WAAU;YAAU,MAAK;YAAO,QAAO;YAAe,SAAQ;;8BACjE,6LAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;8BACrE,6LAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAa;oBAAG,GAAE;;;;;;;;;;;;IAG3E;CACD;AAEc,SAAS;;IACtB,MAAM,WAAW,IAAA,oJAAW;IAE5B,MAAM,eAAe;QACnB,4HAAI,CAAC,MAAM;IACb;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC,0KAAI;oCAAC,MAAK;oCAAa,WAAU;;sDAChC,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAI,WAAU;gDAAqB,MAAK;gDAAO,QAAO;gDAAe,SAAQ;0DAC5E,cAAA,6LAAC;oDAAK,eAAc;oDAAQ,gBAAe;oDAAQ,aAAa;oDAAG,GAAE;;;;;;;;;;;;;;;;sDAGzE,6LAAC;4CAAK,WAAU;sDAAiG;;;;;;;;;;;;8CAMnH,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;kDACZ,WAAW,GAAG,CAAC,CAAC;4CACf,MAAM,WAAW,aAAa,KAAK,IAAI;4CACvC,qBACE,6LAAC,0KAAI;gDAEH,MAAM,KAAK,IAAI;gDACf,WAAW,CAAC,6FAA6F,EACvG,WACI,gDACA,uDACJ;;oDAED,KAAK,IAAI;oDACT,KAAK,IAAI;;+CATL,KAAK,IAAI;;;;;wCAYpB;;;;;;;;;;;;;;;;;sCAMN,6LAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;8CAEvE,6LAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;;;;;;;;;;;;0BAMzC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ,WAAW,GAAG,CAAC,CAAC;wBACf,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,6LAAC,0KAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,yFAAyF,EACnG,WACI,mBACA,kCACJ;;gCAED,KAAK,IAAI;gCACT,KAAK,IAAI;;2BATL,KAAK,IAAI;;;;;oBAYpB;;;;;;;;;;;;;;;;;AAKV;GArFwB;;QACL,oJAAW;;;KADN"}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/components/Timer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback, useRef } from \"react\";\n\ninterface TimerProps {\n  startedAt: string; // ISO строка даты\n  duration: number | null; // минуты, null = без лимита\n  onExpired?: () => void;\n}\n\nexport default function Timer({ startedAt, duration, onExpired }: TimerProps) {\n  const [timeDisplay, setTimeDisplay] = useState(\"\");\n  const [isExpired, setIsExpired] = useState(false);\n  const [isWarning, setIsWarning] = useState(false);\n  const hasPlayedSound = useRef(false);\n\n  // Звук уведомления\n  const playNotificationSound = useCallback(() => {\n    if (hasPlayedSound.current) return;\n    hasPlayedSound.current = true;\n\n    try {\n      const audioContext = new (window.AudioContext ||\n        (window as unknown as { webkitAudioContext: typeof AudioContext }).webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n\n      oscillator.frequency.value = 800;\n      oscillator.type = \"sine\";\n      gainNode.gain.value = 0.3;\n\n      oscillator.start();\n      oscillator.stop(audioContext.currentTime + 0.5);\n\n      // Второй бип\n      setTimeout(() => {\n        const osc2 = audioContext.createOscillator();\n        const gain2 = audioContext.createGain();\n        osc2.connect(gain2);\n        gain2.connect(audioContext.destination);\n        osc2.frequency.value = 1000;\n        osc2.type = \"sine\";\n        gain2.gain.value = 0.3;\n        osc2.start();\n        osc2.stop(audioContext.currentTime + 0.5);\n      }, 600);\n    } catch {\n      // Браузер не поддерживает Web Audio API\n    }\n  }, []);\n\n  useEffect(() => {\n    const updateTimer = () => {\n      const now = new Date();\n      const start = new Date(startedAt);\n      const elapsedMs = now.getTime() - start.getTime();\n      const elapsedMinutes = Math.floor(elapsedMs / 60000);\n      const elapsedSeconds = Math.floor((elapsedMs % 60000) / 1000);\n\n      if (duration === null) {\n        // Без лимита - показываем сколько прошло\n        const hours = Math.floor(elapsedMinutes / 60);\n        const mins = elapsedMinutes % 60;\n        setTimeDisplay(\n          `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}:${elapsedSeconds.toString().padStart(2, \"0\")}`\n        );\n      } else {\n        // С ограничением - показываем обратный отсчёт\n        const totalSeconds = duration * 60;\n        const elapsedTotalSeconds = Math.floor(elapsedMs / 1000);\n        const remainingSeconds = totalSeconds - elapsedTotalSeconds;\n\n        if (remainingSeconds <= 0) {\n          setTimeDisplay(\"00:00:00\");\n          if (!isExpired) {\n            setIsExpired(true);\n            playNotificationSound();\n            onExpired?.();\n          }\n        } else {\n          const hours = Math.floor(remainingSeconds / 3600);\n          const mins = Math.floor((remainingSeconds % 3600) / 60);\n          const secs = remainingSeconds % 60;\n          setTimeDisplay(\n            `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`\n          );\n\n          // Предупреждение за 5 минут\n          if (remainingSeconds <= 300 && remainingSeconds > 0) {\n            setIsWarning(true);\n          }\n        }\n      }\n    };\n\n    updateTimer();\n    const interval = setInterval(updateTimer, 1000);\n\n    return () => clearInterval(interval);\n  }, [startedAt, duration, isExpired, onExpired, playNotificationSound]);\n\n  return (\n    <div className=\"text-center\">\n      <div\n        className={`text-4xl font-mono font-bold ${\n          isExpired\n            ? \"text-red-500 animate-pulse\"\n            : isWarning\n            ? \"text-yellow-500\"\n            : \"text-green-400\"\n        }`}\n      >\n        {timeDisplay}\n      </div>\n      <div className=\"text-xs text-gray-400 mt-1\">\n        {duration === null ? \"Без лимита\" : isExpired ? \"Время истекло!\" : \"Осталось\"}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/components/StartGameModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ninterface StartGameModalProps {\n  assetName: string;\n  categoryName: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onStart: (duration: number | null) => void;\n}\n\nconst presetTimes = [\n  { label: \"30 мин\", value: 30, icon: \"30\" },\n  { label: \"1 час\", value: 60, icon: \"1ч\" },\n  { label: \"1.5 часа\", value: 90, icon: \"1.5\" },\n  { label: \"2 часа\", value: 120, icon: \"2ч\" },\n];\n\nexport default function StartGameModal({\n  assetName,\n  categoryName,\n  isOpen,\n  onClose,\n  onStart,\n}: StartGameModalProps) {\n  const [mode, setMode] = useState<\"free\" | \"timed\">(\"free\");\n  const [customMinutes, setCustomMinutes] = useState(\"\");\n  const [selectedPreset, setSelectedPreset] = useState<number | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  if (!isOpen) return null;\n\n  const handleStart = async () => {\n    setLoading(true);\n    try {\n      if (mode === \"free\") {\n        await onStart(null);\n      } else {\n        const duration = selectedPreset || parseInt(customMinutes) || 60;\n        await onStart(duration);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setMode(\"free\");\n    setCustomMinutes(\"\");\n    setSelectedPreset(null);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n        onClick={handleClose}\n      />\n\n      {/* Modal */}\n      <div className=\"relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl w-full max-w-md shadow-2xl border border-gray-700/50 overflow-hidden\">\n        {/* Header */}\n        <div className=\"relative p-6 pb-4 border-b border-gray-700/50\">\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full -mr-16 -mt-16 blur-2xl\" />\n          <div className=\"relative\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-xl font-bold text-white mb-1\">\n                  Запустить сессию\n                </h2>\n                <p className=\"text-gray-400\">{assetName}</p>\n                <span className=\"text-xs text-gray-500 bg-gray-700/50 px-2 py-0.5 rounded-full mt-1 inline-block\">\n                  {categoryName}\n                </span>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"w-10 h-10 flex items-center justify-center rounded-xl bg-gray-700/50 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-5\">\n          {/* Mode Selector */}\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              onClick={() => setMode(\"free\")}\n              className={`relative p-4 rounded-xl border-2 transition-all duration-200 ${\n                mode === \"free\"\n                  ? \"border-green-500 bg-green-500/10\"\n                  : \"border-gray-700 bg-gray-800/50 hover:border-gray-600\"\n              }`}\n            >\n              <div className={`w-10 h-10 rounded-xl flex items-center justify-center mb-2 ${\n                mode === \"free\" ? \"bg-green-500/20\" : \"bg-gray-700/50\"\n              }`}>\n                <svg className={`w-5 h-5 ${mode === \"free\" ? \"text-green-400\" : \"text-gray-400\"}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <span className={`font-medium ${mode === \"free\" ? \"text-white\" : \"text-gray-400\"}`}>\n                Без лимита\n              </span>\n              {mode === \"free\" && (\n                <div className=\"absolute top-3 right-3 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-3 h-3 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                </div>\n              )}\n            </button>\n\n            <button\n              onClick={() => setMode(\"timed\")}\n              className={`relative p-4 rounded-xl border-2 transition-all duration-200 ${\n                mode === \"timed\"\n                  ? \"border-blue-500 bg-blue-500/10\"\n                  : \"border-gray-700 bg-gray-800/50 hover:border-gray-600\"\n              }`}\n            >\n              <div className={`w-10 h-10 rounded-xl flex items-center justify-center mb-2 ${\n                mode === \"timed\" ? \"bg-blue-500/20\" : \"bg-gray-700/50\"\n              }`}>\n                <svg className={`w-5 h-5 ${mode === \"timed\" ? \"text-blue-400\" : \"text-gray-400\"}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <span className={`font-medium ${mode === \"timed\" ? \"text-white\" : \"text-gray-400\"}`}>\n                По времени\n              </span>\n              {mode === \"timed\" && (\n                <div className=\"absolute top-3 right-3 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-3 h-3 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                </div>\n              )}\n            </button>\n          </div>\n\n          {/* Time Selection */}\n          {mode === \"timed\" && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-4 gap-2\">\n                {presetTimes.map((preset) => (\n                  <button\n                    key={preset.value}\n                    onClick={() => {\n                      setSelectedPreset(preset.value);\n                      setCustomMinutes(\"\");\n                    }}\n                    className={`p-3 rounded-xl font-medium transition-all flex flex-col items-center ${\n                      selectedPreset === preset.value\n                        ? \"bg-blue-600 text-white shadow-lg shadow-blue-500/25\"\n                        : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n                    }`}\n                  >\n                    <span className=\"text-lg font-bold\">{preset.icon}</span>\n                  </button>\n                ))}\n              </div>\n\n              <div className=\"relative\">\n                <input\n                  type=\"number\"\n                  placeholder=\"Другое время (мин)\"\n                  value={customMinutes}\n                  onChange={(e) => {\n                    setCustomMinutes(e.target.value);\n                    setSelectedPreset(null);\n                  }}\n                  className=\"w-full px-4 py-3.5 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50\"\n                />\n                <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500\">\n                  мин\n                </span>\n              </div>\n            </div>\n          )}\n\n          {/* Free Mode Info */}\n          {mode === \"free\" && (\n            <div className=\"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-300 font-medium\">Оплата по факту</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Стоимость рассчитывается автоматически при завершении\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-6 pt-0 flex gap-3\">\n          <button\n            onClick={handleClose}\n            className=\"flex-1 py-3.5 px-4 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-xl transition-colors\"\n          >\n            Отмена\n          </button>\n          <button\n            onClick={handleStart}\n            disabled={loading || (mode === \"timed\" && !selectedPreset && !customMinutes)}\n            className=\"flex-1 py-3.5 px-4 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 disabled:from-gray-700 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg shadow-green-500/25 hover:shadow-green-500/40 disabled:shadow-none\"\n          >\n            {loading ? (\n              <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n            ) : (\n              <>\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                Запустить\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1395, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/components/AssetCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Timer from \"./Timer\";\nimport StartGameModal from \"./StartGameModal\";\nimport { AssetWithSession, RentalSession } from \"@/types\";\nimport { sessions } from \"@/lib/api\";\n\ninterface AssetCardProps {\n  asset: AssetWithSession;\n  onRefresh: () => void;\n}\n\n// Форматирование цены (будет использовать настройки tenant)\nfunction formatPrice(amount: number | undefined | null): string {\n  if (amount === undefined || amount === null) return \"—\";\n  return amount.toLocaleString(\"ru-RU\") + \" сум\";\n}\n\n// Расчёт текущей стоимости\nfunction calculateCurrentCost(startedAt: string, pricePerHour: number): number {\n  const now = new Date();\n  const start = new Date(startedAt);\n  const durationMinutes = (now.getTime() - start.getTime()) / 60000;\n  return Math.round((durationMinutes / 60) * pricePerHour);\n}\n\nexport default function AssetCard({ asset, onRefresh }: AssetCardProps) {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [currentCost, setCurrentCost] = useState(0);\n\n  const isActive = asset.active_session !== null;\n  const activeSession = asset.active_session;\n\n  // Обновление текущей стоимости каждую секунду\n  useEffect(() => {\n    if (!isActive || !activeSession) {\n      setCurrentCost(0);\n      return;\n    }\n\n    const updateCost = () => {\n      const cost = calculateCurrentCost(\n        activeSession.started_at,\n        activeSession.price_snapshot\n      );\n      setCurrentCost(cost);\n    };\n\n    updateCost();\n    const interval = setInterval(updateCost, 1000);\n    return () => clearInterval(interval);\n  }, [isActive, activeSession]);\n\n  // Запуск сессии\n  const handleStart = async (duration: number | null) => {\n    try {\n      await sessions.start(asset.id, duration || undefined);\n      setIsModalOpen(false);\n      onRefresh();\n    } catch (error) {\n      console.error(\"Error starting session:\", error);\n      alert(error instanceof Error ? error.message : \"Ошибка запуска\");\n    }\n  };\n\n  // Завершение сессии\n  const handleStop = async () => {\n    if (!activeSession) return;\n\n    setLoading(true);\n    try {\n      const result = await sessions.stop(activeSession.id);\n      alert(`Сессия завершена!\\n\\nИтого: ${formatPrice(result.total_cost)}`);\n      onRefresh();\n    } catch (error) {\n      console.error(\"Error stopping session:\", error);\n      alert(error instanceof Error ? error.message : \"Ошибка завершения\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Получаем цену за час из активной сессии или из метаданных\n  const hourlyRate = activeSession?.price_snapshot || 0;\n\n  return (\n    <>\n      <div\n        className={`relative overflow-hidden rounded-2xl transition-all duration-300 ${\n          isActive\n            ? \"bg-gradient-to-br from-green-900/40 via-green-800/20 to-gray-800 border-2 border-green-500/40 shadow-xl shadow-green-500/10\"\n            : \"bg-gradient-to-br from-gray-800 to-gray-800/50 border border-gray-700/50 hover:border-gray-600 shadow-lg hover:shadow-xl\"\n        }`}\n      >\n        {/* Decorative glow */}\n        {isActive && (\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full -mr-16 -mt-16 blur-2xl\" />\n        )}\n\n        <div className=\"relative p-5\">\n          {/* Header */}\n          <div className=\"flex items-start justify-between mb-4\">\n            <div>\n              <h3 className=\"text-xl font-bold text-white mb-1\">{asset.name}</h3>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-xs text-gray-500 bg-gray-700/50 px-2 py-0.5 rounded-full\">\n                  {asset.category_name}\n                </span>\n              </div>\n            </div>\n\n            {/* Status Badge */}\n            <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full ${\n              isActive ? \"bg-green-500/20\" : \"bg-gray-700/50\"\n            }`}>\n              <div className={`w-2 h-2 rounded-full ${\n                isActive ? \"bg-green-500 animate-pulse\" : \"bg-gray-500\"\n              }`} />\n              <span className={`text-xs font-medium ${\n                isActive ? \"text-green-400\" : \"text-gray-400\"\n              }`}>\n                {isActive ? \"Занят\" : \"Свободен\"}\n              </span>\n            </div>\n          </div>\n\n          {/* Timer */}\n          <div className=\"bg-gray-900/50 rounded-xl p-4 mb-4\">\n            {isActive && activeSession ? (\n              <Timer\n                startedAt={activeSession.started_at}\n                duration={activeSession.planned_duration}\n                onExpired={onRefresh}\n              />\n            ) : (\n              <div className=\"text-center py-2\">\n                <div className=\"text-4xl font-mono font-bold text-gray-600\">00:00:00</div>\n                <div className=\"text-xs text-gray-500 mt-1\">Ожидание</div>\n              </div>\n            )}\n          </div>\n\n          {/* Current Cost */}\n          {isActive && (\n            <div className=\"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-4 border border-yellow-500/20\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <span className=\"text-sm text-gray-400\">Текущая стоимость</span>\n                </div>\n                <span className=\"text-xl font-bold text-yellow-400\">\n                  {formatPrice(currentCost)}\n                </span>\n              </div>\n            </div>\n          )}\n\n          {/* Action Button */}\n          {isActive ? (\n            <button\n              onClick={handleStop}\n              disabled={loading}\n              className=\"w-full py-3.5 px-4 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 disabled:from-red-800 disabled:to-red-900 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg shadow-red-500/25 hover:shadow-red-500/40\"\n            >\n              {loading ? (\n                <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n              ) : (\n                <>\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z\" />\n                  </svg>\n                  Завершить\n                </>\n              )}\n            </button>\n          ) : (\n            <button\n              onClick={() => setIsModalOpen(true)}\n              className=\"w-full py-3.5 px-4 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg shadow-green-500/25 hover:shadow-green-500/40\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              Начать\n            </button>\n          )}\n        </div>\n      </div>\n\n      <StartGameModal\n        assetName={asset.name}\n        categoryName={asset.category_name}\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        onStart={handleStart}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1792, "column": 0}, "map": {"version":3,"sources":["file:///Users/akkanat/Projects/byiyard/frontend/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Navbar from \"@/components/Navbar\";\nimport AssetCard from \"@/components/AssetCard\";\nimport { AssetWithSession, Category } from \"@/types\";\nimport { assets, categories as categoriesApi } from \"@/lib/api\";\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [assetsList, setAssetsList] = useState<AssetWithSession[]>([]);\n  const [categoriesList, setCategoriesList] = useState<Category[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<number | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Загрузка данных\n  const fetchData = useCallback(async () => {\n    try {\n      const [assetsData, categoriesData] = await Promise.all([\n        assets.list({ category: selectedCategory || undefined }),\n        categoriesApi.list()\n      ]);\n      setAssetsList(assetsData);\n      setCategoriesList(categoriesData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      // Если ошибка авторизации - редирект на логин\n      if (error instanceof Error && error.message.includes(\"401\")) {\n        router.push(\"/login\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedCategory, router]);\n\n  useEffect(() => {\n    // Проверяем авторизацию\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) {\n      router.push(\"/login\");\n      return;\n    }\n\n    fetchData();\n    const interval = setInterval(fetchData, 10000); // Обновление каждые 10 сек\n    return () => clearInterval(interval);\n  }, [fetchData, router]);\n\n  // Фильтрация объектов\n  const activeAssets = assetsList.filter((a) => a.active_session !== null);\n  const freeAssets = assetsList.filter((a) => a.active_session === null);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800\">\n      <Navbar />\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n          {/* Total Assets */}\n          <div className=\"relative overflow-hidden bg-gradient-to-br from-gray-800 to-gray-800/50 rounded-2xl p-5 border border-gray-700/50 shadow-xl\">\n            <div className=\"absolute top-0 right-0 w-20 h-20 bg-blue-500/10 rounded-full -mr-10 -mt-10\" />\n            <div className=\"relative\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n                  </svg>\n                </div>\n              </div>\n              <div className=\"text-3xl font-bold text-white\">{assetsList.length}</div>\n              <div className=\"text-sm text-gray-400\">Всего объектов</div>\n            </div>\n          </div>\n\n          {/* Active */}\n          <div className=\"relative overflow-hidden bg-gradient-to-br from-gray-800 to-gray-800/50 rounded-2xl p-5 border border-green-500/30 shadow-xl shadow-green-500/5\">\n            <div className=\"absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -mr-10 -mt-10\" />\n            <div className=\"relative\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                {activeAssets.length > 0 && (\n                  <span className=\"flex h-3 w-3\">\n                    <span className=\"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-green-400 opacity-75\"></span>\n                    <span className=\"relative inline-flex rounded-full h-3 w-3 bg-green-500\"></span>\n                  </span>\n                )}\n              </div>\n              <div className=\"text-3xl font-bold text-green-400\">{activeAssets.length}</div>\n              <div className=\"text-sm text-gray-400\">Активных</div>\n            </div>\n          </div>\n\n          {/* Free */}\n          <div className=\"relative overflow-hidden bg-gradient-to-br from-gray-800 to-gray-800/50 rounded-2xl p-5 border border-gray-700/50 shadow-xl\">\n            <div className=\"absolute top-0 right-0 w-20 h-20 bg-gray-500/10 rounded-full -mr-10 -mt-10\" />\n            <div className=\"relative\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-gray-500/20 rounded-xl flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n              </div>\n              <div className=\"text-3xl font-bold text-gray-300\">{freeAssets.length}</div>\n              <div className=\"text-sm text-gray-400\">Свободных</div>\n            </div>\n          </div>\n\n          {/* Load Percentage */}\n          <div className=\"relative overflow-hidden bg-gradient-to-br from-gray-800 to-gray-800/50 rounded-2xl p-5 border border-yellow-500/30 shadow-xl shadow-yellow-500/5\">\n            <div className=\"absolute top-0 right-0 w-20 h-20 bg-yellow-500/10 rounded-full -mr-10 -mt-10\" />\n            <div className=\"relative\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-yellow-500/20 rounded-xl flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                  </svg>\n                </div>\n              </div>\n              <div className=\"text-3xl font-bold text-yellow-400\">\n                {assetsList.length > 0 ? Math.round((activeAssets.length / assetsList.length) * 100) : 0}%\n              </div>\n              <div className=\"text-sm text-gray-400\">Загрузка</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Category Filter */}\n        {categoriesList.length > 0 && (\n          <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\n            <button\n              onClick={() => setSelectedCategory(null)}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${\n                selectedCategory === null\n                  ? \"bg-green-600 text-white\"\n                  : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n              }`}\n            >\n              Все\n            </button>\n            {categoriesList.map((cat) => (\n              <button\n                key={cat.id}\n                onClick={() => setSelectedCategory(cat.id)}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${\n                  selectedCategory === cat.id\n                    ? \"bg-green-600 text-white\"\n                    : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n                }`}\n              >\n                {cat.icon} {cat.name}\n              </button>\n            ))}\n          </div>\n        )}\n\n        {/* Loading */}\n        {loading ? (\n          <div className=\"flex flex-col items-center justify-center py-20\">\n            <div className=\"w-16 h-16 border-4 border-green-500/30 border-t-green-500 rounded-full animate-spin mb-4\" />\n            <p className=\"text-gray-400\">Загрузка...</p>\n          </div>\n        ) : (\n          <>\n            {/* Active Assets */}\n            {activeAssets.length > 0 && (\n              <div className=\"mb-8\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"w-2 h-6 bg-green-500 rounded-full\" />\n                  <h2 className=\"text-lg font-semibold text-white\">\n                    Активные\n                  </h2>\n                  <span className=\"px-2 py-0.5 bg-green-500/20 text-green-400 text-sm font-medium rounded-full\">\n                    {activeAssets.length}\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                  {activeAssets.map((asset) => (\n                    <AssetCard\n                      key={asset.id}\n                      asset={asset}\n                      onRefresh={fetchData}\n                    />\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Free Assets */}\n            {freeAssets.length > 0 && (\n              <div>\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"w-2 h-6 bg-gray-500 rounded-full\" />\n                  <h2 className=\"text-lg font-semibold text-white\">\n                    Свободные\n                  </h2>\n                  <span className=\"px-2 py-0.5 bg-gray-500/20 text-gray-400 text-sm font-medium rounded-full\">\n                    {freeAssets.length}\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                  {freeAssets.map((asset) => (\n                    <AssetCard\n                      key={asset.id}\n                      asset={asset}\n                      onRefresh={fetchData}\n                    />\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* No Assets */}\n            {assetsList.length === 0 && (\n              <div className=\"text-center py-20\">\n                <div className=\"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-10 h-10 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\" />\n                  </svg>\n                </div>\n                <div className=\"text-gray-400 text-lg mb-2\">Объекты не найдены</div>\n                <div className=\"text-gray-500 text-sm\">\n                  Добавьте объекты в разделе &quot;Настройки&quot;\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}